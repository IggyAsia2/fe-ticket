"use strict";(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[522],{93637:function(Q,$,r){var B=r(12309),R=r(10582),K=r(50959),n=r(56242),U=r(11527),m=["fieldProps","proFieldProps"],I=["fieldProps","proFieldProps"],d="text",F=function(y){var T=y.fieldProps,S=y.proFieldProps,w=(0,R.Z)(y,m);return(0,U.jsx)(n.Z,(0,B.Z)({valueType:d,fieldProps:T,filedConfig:{valueType:d},proFieldProps:S},w))},E=function(y){var T=y.fieldProps,S=y.proFieldProps,w=(0,R.Z)(y,I);return(0,U.jsx)(n.Z,(0,B.Z)({valueType:"password",fieldProps:T,proFieldProps:S,filedConfig:{valueType:d}},w))},Z=F;Z.Password=E,Z.displayName="ProFormComponent",$.Z=Z},40571:function(Q,$,r){r.r($),r.d($,{default:function(){return ve}});var B=r(28152),R=r.n(B),K=r(13448),n=r.n(K),U=r(77117),m=r.n(U),I=r(74815),d=r.n(I),F=r(59183),E=r(66060);function Z(s,e){return O.apply(this,arguments)}function O(){return O=d()(n()().mark(function s(e,i){return n()().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:return h.abrupt("return",(0,E.request)("".concat("https://apa.vintrip.vn/api/v1","/roles"),m()({method:"GET",headers:{Authorization:"Bearer ".concat((0,F.v)())},params:m()({},e)},i||{})));case 1:case"end":return h.stop()}},s)})),O.apply(this,arguments)}function y(s){return T.apply(this,arguments)}function T(){return T=d()(n()().mark(function s(e){return n()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,E.request)("".concat("https://apa.vintrip.vn/api/v1","/roles/").concat(e==null?void 0:e.roleId),{method:"PATCH",headers:{Authorization:"Bearer ".concat((0,F.v)())},data:m()({},e||{})}));case 1:case"end":return a.stop()}},s)})),T.apply(this,arguments)}function S(s){return w.apply(this,arguments)}function w(){return w=d()(n()().mark(function s(e){return n()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,E.request)("".concat("https://apa.vintrip.vn/api/v1","/roles"),{method:"POST",headers:{Authorization:"Bearer ".concat((0,F.v)())},data:m()({},e||{})}));case 1:case"end":return a.stop()}},s)})),w.apply(this,arguments)}function q(s){return G.apply(this,arguments)}function G(){return G=d()(n()().mark(function s(e){return n()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,E.request)("".concat("https://apa.vintrip.vn/api/v1","/roles/").concat(e==null?void 0:e._id),{method:"DELETE",headers:{Authorization:"Bearer ".concat((0,F.v)())}}));case 1:case"end":return a.stop()}},s)})),G.apply(this,arguments)}function _(s,e){return W.apply(this,arguments)}function W(){return W=d()(n()().mark(function s(e,i){return n()().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:return h.abrupt("return",(0,E.request)("".concat("https://apa.vintrip.vn/api/v1","/right-group"),m()({method:"GET",headers:{Authorization:"Bearer ".concat((0,F.v)())},params:m()({},e)},i||{})));case 1:case"end":return h.stop()}},s)})),W.apply(this,arguments)}var ee=r(35245),re=r(70024),ne=r(14066),C=r(83258),ae=r(65606),te=r(73118),ue=r(79087),A=r(50959),Y=r(88815),H=r(93637),o=r(11527),se=function(e){return(0,o.jsx)(Y.Y,{width:380,open:e.createModalOpen,modalProps:{destroyOnClose:!0,onCancel:function(){return e.onCancel()}},onFinish:e.onFinish,title:"T\u1EA1o Role",children:(0,o.jsx)(H.Z,{name:"name",label:"Role",width:"md",rules:[{required:!0,message:"B\u1EA1n ch\u01B0a nh\u1EADp t\xEAn role"}]})})},le=se,ie=function(e){var i;return(0,o.jsx)(Y.Y,{width:380,open:e.updateModalOpen,modalProps:{destroyOnClose:!0,onCancel:function(){return e.onCancel()}},onFinish:e.onSubmit,initialValues:{id:e.values._id,name:e.values.name,email:e.values.email,role:(i=e.values.role)===null||i===void 0?void 0:i._id},title:"C\u1EADp nh\u1EADt ph\xE2n quy\u1EC1n",children:(0,o.jsx)(H.Z,{name:"name",label:"Role",width:"md",rules:[{required:!0,message:"B\u1EA1n ch\u01B0a nh\u1EADp role"}]})})},oe=ie,de=function(){var s=d()(n()().mark(function e(i){var a;return n()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a=C.ZP.loading("Adding"),t.prev=1,t.next=4,S(m()({},i));case 4:return a(),C.ZP.success("Added successfully"),t.abrupt("return",!0);case 9:return t.prev=9,t.t0=t.catch(1),a(),C.ZP.error("Adding failed, please try again!"),t.abrupt("return",!1);case 14:case"end":return t.stop()}},e,null,[[1,9]])}));return function(i){return s.apply(this,arguments)}}(),ce=function(){var s=d()(n()().mark(function e(i){var a;return n()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(a=C.ZP.loading("Deleting"),i){t.next=3;break}return t.abrupt("return",!0);case 3:return t.prev=3,t.next=6,q(i[0]);case 6:return a(),C.ZP.success("Deleted successfully and will refresh soon"),t.abrupt("return",!0);case 11:return t.prev=11,t.t0=t.catch(3),a(),C.ZP.error("Delete failed, please try again"),t.abrupt("return",!1);case 16:case"end":return t.stop()}},e,null,[[3,11]])}));return function(i){return s.apply(this,arguments)}}(),pe=function(){var e=(0,E.useRequest)(_,{manual:!0,formatResult:function(c){return c.data.map(function(u,p){var P=u.rights.map(function(l){return{key:l.name,title:l.name}});return{key:p,title:u.name,children:P}})}}),i=e.data,a=e.run;(0,A.useEffect)(function(){a({current:1,pageSize:100})},[]);var h=(0,A.useState)(!1),t=R()(h,2),fe=t[0],b=t[1],he=(0,A.useState)(!1),N=R()(he,2),me=N[0],x=N[1],Pe=(0,A.useState)(!1),V=R()(Pe,2),z=V[0],X=V[1],j=(0,A.useRef)(),ge=(0,A.useState)(),k=R()(ge,2),v=k[0],D=k[1],ye=function(){var f=d()(n()().mark(function c(u){var p,P,l,L;return n()().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return p=C.ZP.loading("\u0110ang x\u1EED l\xFD"),P=v._id,l=v.name,L={},l!==u.name&&(L.name=u.name),g.prev=4,g.next=7,y(m()(m()({},L),{},{roleId:P}));case 7:return p(),C.ZP.success("Update is successful"),g.abrupt("return",!0);case 12:return g.prev=12,g.t0=g.catch(4),p(),C.ZP.error("Update failed, please try again!"),g.abrupt("return",!1);case 17:case"end":return g.stop()}},c,null,[[4,12]])}));return function(u){return f.apply(this,arguments)}}(),J=[{title:"T\xEAn",dataIndex:"name",render:function(c,u){return(0,o.jsx)("a",{onClick:function(){D(u),X(!0)},children:c})}},{title:"T\xF9y ch\u1ECDn",dataIndex:"option",valueType:"option",render:function(c,u){return[(0,o.jsx)("a",{hidden:u.name==="admin",onClick:function(){x(!0),D(u)},children:"C\u1EADp nh\u1EADt"},"config"),(0,o.jsx)(o.Fragment,{children:(0,o.jsx)(ae.Z,{title:"B\u1EA1n ch\u1EAFc ch\u1EAFn mu\u1ED1n x\xF3a?",onConfirm:d()(n()().mark(function p(){var P,l;return n()().wrap(function(M){for(;;)switch(M.prev=M.next){case 0:return M.next=2,ce([u]);case 2:(P=j.current)===null||P===void 0||(l=P.reloadAndRest)===null||l===void 0||l.call(P);case 3:case"end":return M.stop()}},p)})),children:(0,o.jsx)("a",{hidden:u.name==="admin",children:"X\xF3a"},"delete")})})]}}];return(0,o.jsxs)(ee._z,{children:[(0,o.jsx)(re.Z,{dateFormatter:"string",actionRef:j,rowKey:"_id",search:{labelWidth:120},toolBarRender:function(){return[(0,o.jsx)(te.ZP,{type:"primary",onClick:function(){b(!0)},children:"T\u1EA1o"},"primary")]},request:Z,columns:J}),(0,o.jsx)(le,{onFinish:function(){var f=d()(n()().mark(function c(u){var p;return n()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.next=2,de(u);case 2:p=l.sent,p&&(b(!1),j.current&&j.current.reload());case 4:case"end":return l.stop()}},c)}));return function(c){return f.apply(this,arguments)}}(),onCancel:function(){b(!1),z||D(void 0)},createModalOpen:fe,values:v||{}}),(0,o.jsx)(oe,{onSubmit:function(){var f=d()(n()().mark(function c(u){var p;return n()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.next=2,ye(u);case 2:p=l.sent,p&&(x(!1),D(void 0),j.current&&j.current.reload());case 4:case"end":return l.stop()}},c)}));return function(c){return f.apply(this,arguments)}}(),onCancel:function(){x(!1),z||D(void 0)},updateModalOpen:me,values:v||{},rightGroupData:i}),(0,o.jsx)(ue.Z,{width:600,open:z,onClose:function(){D(void 0),X(!1)},closable:!1,children:(v==null?void 0:v.name)&&(0,o.jsx)(ne.vY,{column:2,title:v==null?void 0:v.name,request:d()(n()().mark(function f(){return n()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.abrupt("return",{data:v||{}});case 1:case"end":return u.stop()}},f)})),params:{id:v==null?void 0:v.name},columns:J})})]})},ve=pe}}]);
