(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[978],{1442:function(W,U,e){"use strict";var f=e(12309),s=e(50959),j=e(63374),r=e(69164),g=function(T,_){return s.createElement(r.Z,(0,f.Z)((0,f.Z)({},T),{},{ref:_,icon:j.Z}))};g.displayName="PlusOutlined",U.Z=s.forwardRef(g)},74091:function(W,U,e){"use strict";var f=e(12309),s=e(10582),j=e(52145),r=e(50959),g=e(46241),D=e(56242),T=e(11527),_=["fieldProps","children","params","proFieldProps","mode","valueEnum","request","showSearch","options"],H=["fieldProps","children","params","proFieldProps","mode","valueEnum","request","options"],P=function(h,x){var A=h.fieldProps,w=h.children,Z=h.params,a=h.proFieldProps,n=h.mode,l=h.valueEnum,t=h.request,v=h.showSearch,I=h.options,V=(0,s.Z)(h,_),q=(0,r.useContext)(g.Z);return(0,T.jsx)(D.Z,(0,f.Z)((0,f.Z)({valueEnum:(0,j.h)(l),request:t,params:Z,valueType:"select",filedConfig:{customLightMode:!0},fieldProps:(0,f.Z)({options:I,mode:n,showSearch:v,getPopupContainer:q.getPopupContainer},A),ref:x,proFieldProps:a},V),{},{children:w}))},B=r.forwardRef(function(E,h){var x=E.fieldProps,A=E.children,w=E.params,Z=E.proFieldProps,a=E.mode,n=E.valueEnum,l=E.request,t=E.options,v=(0,s.Z)(E,H),I=(0,f.Z)({options:t,mode:a||"multiple",labelInValue:!0,showSearch:!0,suffixIcon:null,autoClearSearchValue:!0,optionLabelProp:"label"},x),V=(0,r.useContext)(g.Z);return(0,T.jsx)(D.Z,(0,f.Z)((0,f.Z)({valueEnum:(0,j.h)(n),request:l,params:w,valueType:"select",filedConfig:{customLightMode:!0},fieldProps:(0,f.Z)({getPopupContainer:V.getPopupContainer},I),ref:h,proFieldProps:Z},v),{},{children:A}))}),L=r.forwardRef(P),F=B,b=L;b.SearchSelect=F,b.displayName="ProFormComponent",U.Z=b},93637:function(W,U,e){"use strict";var f=e(12309),s=e(10582),j=e(50959),r=e(56242),g=e(11527),D=["fieldProps","proFieldProps"],T=["fieldProps","proFieldProps"],_="text",H=function(F){var b=F.fieldProps,E=F.proFieldProps,h=(0,s.Z)(F,D);return(0,g.jsx)(r.Z,(0,f.Z)({valueType:_,fieldProps:b,filedConfig:{valueType:_},proFieldProps:E},h))},P=function(F){var b=F.fieldProps,E=F.proFieldProps,h=(0,s.Z)(F,T);return(0,g.jsx)(r.Z,(0,f.Z)({valueType:"password",fieldProps:b,proFieldProps:E,filedConfig:{valueType:_}},h))},B=H;B.Password=P,B.displayName="ProFormComponent",U.Z=B},80223:function(W,U,e){"use strict";e.d(U,{FK:function(){return w},Lh:function(){return H},Nq:function(){return B},cn:function(){return E},gQ:function(){return F},kX:function(){return x}});var f=e(13448),s=e.n(f),j=e(77117),r=e.n(j),g=e(74815),D=e.n(g),T=e(59183),_=e(66060);function H(a,n){return P.apply(this,arguments)}function P(){return P=D()(s()().mark(function a(n,l){return s()().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return v.abrupt("return",(0,_.request)("".concat("https://apa.vintrip.vn/api/v1","/users"),r()({method:"GET",headers:{Authorization:"Bearer ".concat((0,T.v)())},params:r()({},n)},l||{})));case 1:case"end":return v.stop()}},a)})),P.apply(this,arguments)}function B(a){return L.apply(this,arguments)}function L(){return L=D()(s()().mark(function a(n){return s()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,_.request)("".concat("https://apa.vintrip.vn/api/v1","/users/").concat(n==null?void 0:n.userId),{method:"PATCH",headers:{Authorization:"Bearer ".concat((0,T.v)())},data:r()({},n||{})}));case 1:case"end":return t.stop()}},a)})),L.apply(this,arguments)}function F(a){return b.apply(this,arguments)}function b(){return b=D()(s()().mark(function a(n){return s()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,_.request)("".concat("https://apa.vintrip.vn/api/v1","/users/updateMyPassword"),{method:"PATCH",headers:{Authorization:"Bearer ".concat((0,T.v)())},data:r()({},n||{})}));case 1:case"end":return t.stop()}},a)})),b.apply(this,arguments)}function E(a){return h.apply(this,arguments)}function h(){return h=D()(s()().mark(function a(n){return s()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,_.request)("".concat("https://apa.vintrip.vn/api/v1","/users"),{method:"POST",headers:{Authorization:"Bearer ".concat((0,T.v)())},data:r()({},n||{})}));case 1:case"end":return t.stop()}},a)})),h.apply(this,arguments)}function x(a){return A.apply(this,arguments)}function A(){return A=D()(s()().mark(function a(n){return s()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,_.request)("".concat("https://apa.vintrip.vn/api/v1","/users/").concat(n==null?void 0:n._id),{method:"DELETE",headers:{Authorization:"Bearer ".concat((0,T.v)())}}));case 1:case"end":return t.stop()}},a)})),A.apply(this,arguments)}function w(a){return Z.apply(this,arguments)}function Z(){return Z=D()(s()().mark(function a(n){return s()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,_.request)("".concat("https://apa.vintrip.vn/api/v1","/users/all"),{method:"POST",headers:{Authorization:"Bearer ".concat((0,T.v)())},data:r()({},n||{})}));case 1:case"end":return t.stop()}},a)})),Z.apply(this,arguments)}},41874:function(W,U,e){"use strict";e.d(U,{Fc:function(){return P},Ih:function(){return w},XV:function(){return h},Xy:function(){return b},_3:function(){return B},aS:function(){return L},bf:function(){return Z},jX:function(){return A},pn:function(){return x},uO:function(){return F},z2:function(){return E}});var f=e(21320),s=e.n(f),j=e(77117),r=e.n(j),g=e(66060),D=e(5726),T=e.n(D),_=e(4895),H=e.n(_);function P(a){return T().locale("vi"),T()(a).format("DD/MM/YYYY, HH:mm")}function B(a){return T()(a).format("DD/MM/YYYY")}function L(a){var n=new Intl.NumberFormat("vi-VN",{style:"currency",currency:"VND"});return n.format(a)}function F(a){var n=T()(a,"DD/MM/YYYY"),l=n.toISOString();return l}function b(a,n){var l={};return a.reduce(function(t,v){return r()(r()({},t),{},s()({},v[n],{text:v.label}))},l)}function E(a,n){var l={};return a.reduce(function(t,v){return r()(r()({},t),{},s()({},v[n],v.name))},l)}function h(a){var n={};return a.map(function(l){var t=l.groupTickets.map(function(v){return{field:"".concat(v.sku," - ").concat(v.name," - ").concat(v.unit),value:v._id}});return{field:l.name,value:l._id,ticket:t}},n)}function x(a){var n={};return a.map(function(l){var t=l.cashiers.map(function(v){return{label:"".concat(v.name," - ").concat(v.order),value:v._id}});return{label:l.name,options:t}},n)}function A(a){var n={};return a.map(function(l){return{label:l.name,phone:l.phone}},n)}function w(){var a=(0,g.useModel)("@@initialState"),n=a.initialState,l=n||{},t=l.currentUser;return t}var Z={Adult:{name:"Ng\u01B0\u1EDDi l\u1EDBn"},Child:{name:"Tr\u1EBB em"},Elder:{name:"Ng\u01B0\u1EDDi cao tu\u1ED5i"}}},37329:function(W,U,e){"use strict";e.r(U),e.d(U,{default:function(){return Me}});var f=e(28152),s=e.n(f),j=e(13448),r=e.n(j),g=e(77117),D=e.n(g),T=e(74815),_=e.n(T),H=e(59183),P=e(66060);function B(){return L.apply(this,arguments)}function L(){return L=_()(r()().mark(function C(){return r()().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return p.abrupt("return",(0,P.request)("".concat("https://apa.vintrip.vn/api/v1","/roles/roleList"),{method:"GET",headers:{Authorization:"Bearer ".concat((0,H.v)())}}));case 1:case"end":return p.stop()}},C)})),L.apply(this,arguments)}function F(C){return b.apply(this,arguments)}function b(){return b=_asyncToGenerator(_regeneratorRuntime().mark(function C(i){return _regeneratorRuntime().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.abrupt("return",request("".concat("https://apa.vintrip.vn/api/v1","/roles"),{method:"POST",data:_objectSpread({method:"update"},i||{})}));case 1:case"end":return o.stop()}},C)})),b.apply(this,arguments)}function E(C){return h.apply(this,arguments)}function h(){return h=_asyncToGenerator(_regeneratorRuntime().mark(function C(i){return _regeneratorRuntime().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.abrupt("return",request("".concat("https://apa.vintrip.vn/api/v1","/roles"),{method:"POST",data:_objectSpread({method:"post"},i||{})}));case 1:case"end":return o.stop()}},C)})),h.apply(this,arguments)}function x(C){return A.apply(this,arguments)}function A(){return A=_asyncToGenerator(_regeneratorRuntime().mark(function C(i){return _regeneratorRuntime().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.abrupt("return",request("".concat("https://apa.vintrip.vn/api/v1","/roles"),{method:"POST",data:_objectSpread({method:"delete"},i||{})}));case 1:case"end":return o.stop()}},C)})),A.apply(this,arguments)}var w=e(80223),Z=e(41874),a=e(1442),n=e(35245),l=e(70024),t=e(53830),v=e(79739),I=e(83258),V=e(73118),q=e(79087),K=e(50959),se=e(88815),Q=e(93637),ue=e(74091),c=e(11527),_e=function(i){var p=(0,P.useIntl)();return(0,c.jsxs)(se.Y,{width:380,open:i.createModalOpen,modalProps:{destroyOnClose:!0,onCancel:function(){return i.onCancel()}},onFinish:i.onFinish,title:p.formatMessage({id:"pages.searchTable.updateForm.userCreate",defaultMessage:"Create User"}),children:[(0,c.jsx)(Q.Z,{name:"name",label:p.formatMessage({id:"pages.searchTable.updateForm.userName.nameLabel",defaultMessage:"Update"}),width:"md",rules:[{required:!0,message:(0,c.jsx)(P.FormattedMessage,{id:"pages.searchTable.updateForm.userName.nameUsers",defaultMessage:"Update"})}]}),(0,c.jsx)(Q.Z,{name:"email",label:p.formatMessage({id:"pages.searchTable.updateForm.userEmail.emailLabel",defaultMessage:"Update"}),width:"md",rules:[{required:!0,message:(0,c.jsx)(P.FormattedMessage,{id:"pages.searchTable.updateForm.userEmail.emailPlaceholder",defaultMessage:"Update"})}]}),(0,c.jsx)(ue.Z,{name:"role",label:p.formatMessage({id:"pages.searchTable.updateForm.role",defaultMessage:"Role"}),options:i.roleList,rules:[{required:!0,message:(0,c.jsx)(P.FormattedMessage,{id:"pages.searchTable.updateForm.rolePlaceholder",defaultMessage:"Role"})}],width:"md"})]})},he=_e,ve=function(i){var p,o=(0,P.useIntl)();return(0,c.jsxs)(se.Y,{width:380,open:i.updateModalOpen,modalProps:{destroyOnClose:!0,onCancel:function(){return i.onCancel()}},onFinish:i.onSubmit,initialValues:{id:i.values._id,name:i.values.name,email:i.values.email,role:(p=i.values.role)===null||p===void 0?void 0:p._id},title:o.formatMessage({id:"pages.searchTable.updateForm.userConfig",defaultMessage:"Update User"}),children:[(0,c.jsx)(Q.Z,{name:"name",label:o.formatMessage({id:"pages.searchTable.updateForm.userName.nameLabel",defaultMessage:"Update"}),width:"md",rules:[{required:!0,message:(0,c.jsx)(P.FormattedMessage,{id:"pages.searchTable.updateForm.userName.nameUsers",defaultMessage:"Update"})}]}),(0,c.jsx)(Q.Z,{name:"email",label:o.formatMessage({id:"pages.searchTable.updateForm.userEmail.emailLabel",defaultMessage:"Update"}),width:"md",rules:[{required:!0,message:(0,c.jsx)(P.FormattedMessage,{id:"pages.searchTable.updateForm.userEmail.emailPlaceholder",defaultMessage:"Update"})}]}),(0,c.jsx)(ue.Z,{name:"role",label:o.formatMessage({id:"pages.searchTable.updateForm.role",defaultMessage:"Role"}),options:i.roleList,rules:[{required:!0,message:(0,c.jsx)(P.FormattedMessage,{id:"pages.searchTable.updateForm.rolePlaceholder",defaultMessage:"Role"})}],width:"md"})]})},fe=ve,ge=function(){var C=_()(r()().mark(function i(p){var o;return r()().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return o=I.ZP.loading("Adding"),d.prev=1,d.next=4,(0,w.cn)(D()({},p));case 4:return o(),I.ZP.success("Added successfully"),d.abrupt("return",!0);case 9:return d.prev=9,d.t0=d.catch(1),o(),I.ZP.error("Adding failed, please try again!"),d.abrupt("return",!1);case 14:case"end":return d.stop()}},i,null,[[1,9]])}));return function(p){return C.apply(this,arguments)}}(),le=function(){var C=_()(r()().mark(function i(p){var o;return r()().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:if(o=I.ZP.loading("Deleting"),p){d.next=3;break}return d.abrupt("return",!0);case 3:if(d.prev=3,!(p.length>1)){d.next=9;break}return d.next=7,(0,w.FK)({key:p.map(function(ee){return ee._id})});case 7:d.next=11;break;case 9:return d.next=11,(0,w.kX)(p[0]);case 11:return o(),I.ZP.success("Deleted successfully and will refresh soon"),d.abrupt("return",!0);case 16:return d.prev=16,d.t0=d.catch(3),o(),I.ZP.error("Delete failed, please try again"),d.abrupt("return",!1);case 21:case"end":return d.stop()}},i,null,[[3,16]])}));return function(p){return C.apply(this,arguments)}}(),Pe=function(){var i=(0,P.useRequest)(B,{manual:!0,formatResult:function(u){return u}}),p=i.data,o=i.run;(0,K.useEffect)(function(){o()},[]);var k=(0,K.useState)(!1),d=s()(k,2),ee=d[0],re=d[1],Te=(0,K.useState)(!1),oe=s()(Te,2),Ee=oe[0],ae=oe[1],De=(0,K.useState)(!1),ie=s()(De,2),te=ie[0],de=ie[1],$=(0,K.useRef)(),ye=(0,K.useState)(),me=s()(ye,2),O=me[0],z=me[1],be=(0,K.useState)([]),ce=s()(be,2),J=ce[0],ne=ce[1],Ce=function(){var M=_()(r()().mark(function u(m){var R,S,y,X,N,G;return r()().wrap(function(Y){for(;;)switch(Y.prev=Y.next){case 0:if(R=I.ZP.loading("\u0110ang x\u1EED l\xFD"),S=O._id,y=O.email,X=O.role,N=O.name,G={},N!==m.name&&(G.name=m.name),y!==m.email&&(G.email=m.email),(X==null?void 0:X._id)!==m.role&&(G.role=m.role),!Object.keys(G).length){Y.next=22;break}return Y.prev=7,Y.next=10,(0,w.Nq)(D()(D()({},G),{},{userId:S}));case 10:return R(),I.ZP.success("Update is successful"),Y.abrupt("return",!0);case 15:return Y.prev=15,Y.t0=Y.catch(7),R(),I.ZP.error("Update failed, please try again!"),Y.abrupt("return",!1);case 20:Y.next=24;break;case 22:return R(),Y.abrupt("return",!0);case 24:case"end":return Y.stop()}},u,null,[[7,15]])}));return function(m){return M.apply(this,arguments)}}(),pe=[{title:"T\xEAn",dataIndex:"name",tip:"The Name is the unique key",render:function(u,m){return(0,c.jsx)("a",{onClick:function(){z(m),de(!0)},children:u})}},{title:"Email",dataIndex:"email",valueType:"textarea"},{title:"Role",dataIndex:"role",hideInForm:!0,renderText:function(u){return u&&u.name}},{title:"Tr\u1EA1ng th\xE1i",dataIndex:"active",hideInForm:!0,valueEnum:{true:{text:"Ho\u1EA1t \u0111\u1ED9ng",status:"Success"},false:{text:"H\u1EE7y",status:"Error"}}},{title:"Ng\xE0y t\u1EA1o",dataIndex:"createdAt",renderText:function(u){return(0,Z.Fc)(u)}},{title:"Ng\xE0y c\u1EADp nh\u1EADt",dataIndex:"updatedAt",renderText:function(u){return(0,Z.Fc)(u)}},{title:"T\xF9y ch\u1ECDn",dataIndex:"option",valueType:"option",render:function(u,m){return[(0,c.jsx)("a",{hidden:m.email==="pcvbaoit@gmail.com",onClick:function(){ae(!0),z(m)},children:"C\u1EADp nh\u1EADt"},"config"),(0,c.jsx)("a",{hidden:m.email==="pcvbaoit@gmail.com",onClick:_()(r()().mark(function R(){var S,y;return r()().wrap(function(N){for(;;)switch(N.prev=N.next){case 0:return N.next=2,le([m]);case 2:ne([]),(S=$.current)===null||S===void 0||(y=S.reloadAndRest)===null||y===void 0||y.call(S);case 4:case"end":return N.stop()}},R)})),children:"X\xF3a"},"subscribeAlert")]}}];return(0,c.jsxs)(n._z,{children:[(0,c.jsx)(l.Z,{dateFormatter:"string",actionRef:$,rowKey:"_id",search:{labelWidth:120},toolBarRender:function(){return[(0,c.jsxs)(V.ZP,{type:"primary",onClick:function(){re(!0)},children:[(0,c.jsx)(a.Z,{})," T\u1EA1o"]},"primary")]},request:w.Lh,columns:pe,rowSelection:{onChange:function(u,m){ne(m)},getCheckboxProps:function(u){return{disabled:u.email==="pcvbaoit@gmail.com",name:u.email}}}}),(J==null?void 0:J.length)>0&&(0,c.jsx)(t.S,{children:(0,c.jsx)(V.ZP,{type:"primary",danger:!0,onClick:_()(r()().mark(function M(){var u,m;return r()().wrap(function(S){for(;;)switch(S.prev=S.next){case 0:return S.next=2,le(J);case 2:ne([]),(u=$.current)===null||u===void 0||(m=u.reloadAndRest)===null||m===void 0||m.call(u);case 4:case"end":return S.stop()}},M)})),children:(0,c.jsx)(P.FormattedMessage,{id:"pages.searchTable.deletion",defaultMessage:"Deletion"})})}),(0,c.jsx)(he,{onFinish:function(){var M=_()(r()().mark(function u(m){var R;return r()().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:return y.next=2,ge(m);case 2:R=y.sent,R&&(re(!1),$.current&&$.current.reload());case 4:case"end":return y.stop()}},u)}));return function(u){return M.apply(this,arguments)}}(),onCancel:function(){re(!1),te||z(void 0)},createModalOpen:ee,values:O||{},roleList:p}),(0,c.jsx)(fe,{onSubmit:function(){var M=_()(r()().mark(function u(m){var R;return r()().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:return y.next=2,Ce(m);case 2:R=y.sent,R&&(ae(!1),z(void 0),$.current&&$.current.reload());case 4:case"end":return y.stop()}},u)}));return function(u){return M.apply(this,arguments)}}(),onCancel:function(){ae(!1),te||z(void 0)},updateModalOpen:Ee,values:O||{},roleList:p}),(0,c.jsx)(q.Z,{width:600,open:te,onClose:function(){z(void 0),de(!1)},closable:!1,children:(O==null?void 0:O.name)&&(0,c.jsx)(v.vY,{column:2,title:O==null?void 0:O.name,request:_()(r()().mark(function M(){return r()().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return m.abrupt("return",{data:O||{}});case 1:case"end":return m.stop()}},M)})),params:{id:O==null?void 0:O.name},columns:pe})})]})},Me=Pe},4895:function(W,U,e){(function(f,s){W.exports=s(e(5726))})(this,function(f){"use strict";function s(g){return g&&typeof g=="object"&&"default"in g?g:{default:g}}var j=s(f),r={name:"vi",weekdays:"ch\u1EE7 nh\u1EADt_th\u1EE9 hai_th\u1EE9 ba_th\u1EE9 t\u01B0_th\u1EE9 n\u0103m_th\u1EE9 s\xE1u_th\u1EE9 b\u1EA3y".split("_"),months:"th\xE1ng 1_th\xE1ng 2_th\xE1ng 3_th\xE1ng 4_th\xE1ng 5_th\xE1ng 6_th\xE1ng 7_th\xE1ng 8_th\xE1ng 9_th\xE1ng 10_th\xE1ng 11_th\xE1ng 12".split("_"),weekStart:1,weekdaysShort:"CN_T2_T3_T4_T5_T6_T7".split("_"),monthsShort:"Th01_Th02_Th03_Th04_Th05_Th06_Th07_Th08_Th09_Th10_Th11_Th12".split("_"),weekdaysMin:"CN_T2_T3_T4_T5_T6_T7".split("_"),ordinal:function(g){return g},formats:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM [n\u0103m] YYYY",LLL:"D MMMM [n\u0103m] YYYY HH:mm",LLLL:"dddd, D MMMM [n\u0103m] YYYY HH:mm",l:"DD/M/YYYY",ll:"D MMM YYYY",lll:"D MMM YYYY HH:mm",llll:"ddd, D MMM YYYY HH:mm"},relativeTime:{future:"%s t\u1EDBi",past:"%s tr\u01B0\u1EDBc",s:"v\xE0i gi\xE2y",m:"m\u1ED9t ph\xFAt",mm:"%d ph\xFAt",h:"m\u1ED9t gi\u1EDD",hh:"%d gi\u1EDD",d:"m\u1ED9t ng\xE0y",dd:"%d ng\xE0y",M:"m\u1ED9t th\xE1ng",MM:"%d th\xE1ng",y:"m\u1ED9t n\u0103m",yy:"%d n\u0103m"}};return j.default.locale(r,null,!0),r})}}]);
