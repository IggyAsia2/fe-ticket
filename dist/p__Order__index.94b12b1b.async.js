"use strict";(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[335],{22818:function(_e,z,t){t.d(z,{U0:function(){return ae},Uu:function(){return g},gK:function(){return X},ik:function(){return p},kh:function(){return Q},nM:function(){return V}});var Y=t(13448),l=t.n(Y),G=t(77117),i=t.n(G),re=t(74815),f=t.n(re),b=t(59183),D=t(66060);function g(c,a){return S.apply(this,arguments)}function S(){return S=f()(l()().mark(function c(a,y){return l()().wrap(function(ne){for(;;)switch(ne.prev=ne.next){case 0:return ne.abrupt("return",(0,D.request)("".concat("https://apa.vintrip.vn/api/v1","/bigTickets?sort=name"),i()({method:"GET",headers:{Authorization:"Bearer ".concat((0,b.v)())},params:i()({},a)},y||{})));case 1:case"end":return ne.stop()}},c)})),S.apply(this,arguments)}function C(c){return $.apply(this,arguments)}function $(){return $=_asyncToGenerator(_regeneratorRuntime().mark(function c(a){return _regeneratorRuntime().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return _.abrupt("return",request("".concat("https://apa.vintrip.vn/api/v1","/bigTickets/").concat(a==null?void 0:a.productId),_objectSpread({method:"GET",headers:{Authorization:"Bearer ".concat(getAuth())}},a||{})));case 1:case"end":return _.stop()}},c)})),$.apply(this,arguments)}function ae(c){return K.apply(this,arguments)}function K(){return K=f()(l()().mark(function c(a){return l()().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return _.abrupt("return",(0,D.request)("".concat("https://apa.vintrip.vn/api/v1","/bigTickets/link"),{method:"POST",headers:{Authorization:"Bearer ".concat((0,b.v)())},data:i()({},a||{})}));case 1:case"end":return _.stop()}},c)})),K.apply(this,arguments)}function V(c){return N.apply(this,arguments)}function N(){return N=f()(l()().mark(function c(a){return l()().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return _.abrupt("return",(0,D.request)("".concat("https://apa.vintrip.vn/api/v1","/bigTickets/").concat(a==null?void 0:a.productId),{method:"PATCH",headers:{Authorization:"Bearer ".concat((0,b.v)()),"Content-Type":"multipart/form-data"},data:i()({},a||{})}));case 1:case"end":return _.stop()}},c)})),N.apply(this,arguments)}function X(c){return U.apply(this,arguments)}function U(){return U=f()(l()().mark(function c(a){return l()().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return _.abrupt("return",(0,D.request)("".concat("https://apa.vintrip.vn/api/v1","/bigTickets"),{method:"POST",headers:{Authorization:"Bearer ".concat((0,b.v)())},data:i()({},a||{})}));case 1:case"end":return _.stop()}},c)})),U.apply(this,arguments)}function Q(c){return F.apply(this,arguments)}function F(){return F=f()(l()().mark(function c(a){return l()().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return _.abrupt("return",(0,D.request)("".concat("https://apa.vintrip.vn/api/v1","/bigTickets/").concat(a==null?void 0:a._id),{method:"DELETE",headers:{Authorization:"Bearer ".concat((0,b.v)())}}));case 1:case"end":return _.stop()}},c)})),F.apply(this,arguments)}function p(c){return m.apply(this,arguments)}function m(){return m=f()(l()().mark(function c(a){return l()().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return _.abrupt("return",(0,D.request)("".concat("https://apa.vintrip.vn/api/v1","/bigTickets/all"),{method:"POST",headers:{Authorization:"Bearer ".concat((0,b.v)())},data:i()({},a||{})}));case 1:case"end":return _.stop()}},c)})),m.apply(this,arguments)}},80223:function(_e,z,t){t.d(z,{FK:function(){return Q},Lh:function(){return g},Nq:function(){return C},cn:function(){return V},gQ:function(){return ae},kX:function(){return X}});var Y=t(13448),l=t.n(Y),G=t(77117),i=t.n(G),re=t(74815),f=t.n(re),b=t(59183),D=t(66060);function g(p,m){return S.apply(this,arguments)}function S(){return S=f()(l()().mark(function p(m,c){return l()().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:return y.abrupt("return",(0,D.request)("".concat("https://apa.vintrip.vn/api/v1","/users"),i()({method:"GET",headers:{Authorization:"Bearer ".concat((0,b.v)())},params:i()({},m)},c||{})));case 1:case"end":return y.stop()}},p)})),S.apply(this,arguments)}function C(p){return $.apply(this,arguments)}function $(){return $=f()(l()().mark(function p(m){return l()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,D.request)("".concat("https://apa.vintrip.vn/api/v1","/users/").concat(m==null?void 0:m.userId),{method:"PATCH",headers:{Authorization:"Bearer ".concat((0,b.v)())},data:i()({},m||{})}));case 1:case"end":return a.stop()}},p)})),$.apply(this,arguments)}function ae(p){return K.apply(this,arguments)}function K(){return K=f()(l()().mark(function p(m){return l()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,D.request)("".concat("https://apa.vintrip.vn/api/v1","/users/updateMyPassword"),{method:"PATCH",headers:{Authorization:"Bearer ".concat((0,b.v)())},data:i()({},m||{})}));case 1:case"end":return a.stop()}},p)})),K.apply(this,arguments)}function V(p){return N.apply(this,arguments)}function N(){return N=f()(l()().mark(function p(m){return l()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,D.request)("".concat("https://apa.vintrip.vn/api/v1","/users"),{method:"POST",headers:{Authorization:"Bearer ".concat((0,b.v)())},data:i()({},m||{})}));case 1:case"end":return a.stop()}},p)})),N.apply(this,arguments)}function X(p){return U.apply(this,arguments)}function U(){return U=f()(l()().mark(function p(m){return l()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,D.request)("".concat("https://apa.vintrip.vn/api/v1","/users/").concat(m==null?void 0:m._id),{method:"DELETE",headers:{Authorization:"Bearer ".concat((0,b.v)())}}));case 1:case"end":return a.stop()}},p)})),U.apply(this,arguments)}function Q(p){return F.apply(this,arguments)}function F(){return F=f()(l()().mark(function p(m){return l()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,D.request)("".concat("https://apa.vintrip.vn/api/v1","/users/all"),{method:"POST",headers:{Authorization:"Bearer ".concat((0,b.v)())},data:i()({},m||{})}));case 1:case"end":return a.stop()}},p)})),F.apply(this,arguments)}},85144:function(_e,z,t){t.d(z,{U:function(){return G}});var Y=t(5726),l=t.n(Y),G=[{label:"H\xF4m nay",value:[l()(),l()()]},{label:"H\xF4m qua",value:[l()().add(-1,"d"),l()().add(-1,"d")]},{label:"Tu\u1EA7n n\xE0y",value:[l()().startOf("week"),l()().endOf("week")]},{label:"Tu\u1EA7n tr\u01B0\u1EDBc",value:[l()().subtract(1,"weeks").startOf("week"),l()().subtract(1,"weeks").endOf("week")]},{label:"Th\xE1ng n\xE0y",value:[l()().startOf("month"),l()().endOf("month")]},{label:"Th\xE1ng tr\u01B0\u1EDBc",value:[l()().subtract(1,"months").startOf("month"),l()().subtract(1,"months").endOf("month")]}]},41874:function(_e,z,t){t.d(z,{Fc:function(){return S},Ih:function(){return Q},XV:function(){return N},Xy:function(){return K},_3:function(){return C},aS:function(){return $},bf:function(){return F},jX:function(){return U},pn:function(){return X},uO:function(){return ae},z2:function(){return V}});var Y=t(21320),l=t.n(Y),G=t(77117),i=t.n(G),re=t(66060),f=t(5726),b=t.n(f),D=t(4895),g=t.n(D);function S(p){return b().locale("vi"),b()(p).format("DD/MM/YYYY, HH:mm")}function C(p){return b()(p).format("DD/MM/YYYY")}function $(p){var m=new Intl.NumberFormat("vi-VN",{style:"currency",currency:"VND"});return m.format(p)}function ae(p){var m=b()(p,"DD/MM/YYYY"),c=m.toISOString();return c}function K(p,m){var c={};return p.reduce(function(a,y){return i()(i()({},a),{},l()({},y[m],{text:y.label}))},c)}function V(p,m){var c={};return p.reduce(function(a,y){return i()(i()({},a),{},l()({},y[m],y.name))},c)}function N(p){var m={};return p.map(function(c){var a=c.groupTickets.map(function(y){return{field:"".concat(y.sku," - ").concat(y.name," - ").concat(y.unit),value:y._id}});return{field:c.name,value:c._id,ticket:a}},m)}function X(p){var m={};return p.map(function(c){var a=c.cashiers.map(function(y){return{label:"".concat(y.name," - ").concat(y.order),value:y._id}});return{label:c.name,options:a}},m)}function U(p){var m={};return p.map(function(c){return{label:c.name,phone:c.phone}},m)}function Q(){var p=(0,re.useModel)("@@initialState"),m=p.initialState,c=m||{},a=c.currentUser;return a}var F={Adult:{name:"Ng\u01B0\u1EDDi l\u1EDBn"},Child:{name:"Tr\u1EBB em"},Elder:{name:"Ng\u01B0\u1EDDi cao tu\u1ED5i"}}},31886:function(_e,z,t){t.r(z),t.d(z,{default:function(){return cn}});var Y=t(77117),l=t.n(Y),G=t(13448),i=t.n(G),re=t(74815),f=t.n(re),b=t(28152),D=t.n(b),g=t(41874),S=t(59183),C=t(66060),$=t(5726),ae=t.n($);function K(E,s){return V.apply(this,arguments)}function V(){return V=_asyncToGenerator(_regeneratorRuntime().mark(function E(s,A){return _regeneratorRuntime().wrap(function(w){for(;;)switch(w.prev=w.next){case 0:return w.abrupt("return",request("".concat("https://apa.vintrip.vn/api/v1","/orders"),_objectSpread({method:"GET",headers:{Authorization:"Bearer ".concat(getAuth())},params:_objectSpread({},s)},A||{})));case 1:case"end":return w.stop()}},E)})),V.apply(this,arguments)}function N(E,s){return X.apply(this,arguments)}function X(){return X=_asyncToGenerator(_regeneratorRuntime().mark(function E(s,A){var d,w,L;return _regeneratorRuntime().wrap(function(R){for(;;)switch(R.prev=R.next){case 0:return d=s.state?"":"&state=Finished",w=s["updatedAt[gte]"]?"":"&updatedAt[gte]=".concat(timeStamp(dayjs().format("DD/MM/YYYY"))),L=s["updatedAt[lte]"]?"":"&updatedAt[lte]=".concat(timeStamp(dayjs().add(1,"day").format("DD/MM/YYYY"))),R.abrupt("return",request("".concat("https://apa.vintrip.vn/api/v1","/orders/report?sort=updatedAt").concat(d).concat(w).concat(L),_objectSpread({method:"GET",headers:{Authorization:"Bearer ".concat(getAuth())},params:_objectSpread({},s)},A||{})));case 4:case"end":return R.stop()}},E)})),X.apply(this,arguments)}function U(E){return Q.apply(this,arguments)}function Q(){return Q=f()(i()().mark(function E(s){return i()().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.abrupt("return",(0,C.request)("".concat("https://apa.vintrip.vn/api/v1","/orders/").concat(s==null?void 0:s.oid),{method:"PATCH",headers:{Authorization:"Bearer ".concat((0,S.v)())},data:l()({},s||{})}));case 1:case"end":return d.stop()}},E)})),Q.apply(this,arguments)}function F(E){return p.apply(this,arguments)}function p(){return p=f()(i()().mark(function E(s){return i()().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.abrupt("return",(0,C.request)("".concat("https://apa.vintrip.vn/api/v1","/orders/all"),{method:"POST",headers:{Authorization:"Bearer ".concat((0,S.v)())},data:l()({},s||{})}));case 1:case"end":return d.stop()}},E)})),p.apply(this,arguments)}function m(E){return c.apply(this,arguments)}function c(){return c=f()(i()().mark(function E(s){return i()().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.abrupt("return",(0,C.request)("".concat("https://apa.vintrip.vn/api/v1","/orders/reduce"),{method:"POST",headers:{Authorization:"Bearer ".concat((0,S.v)())},data:l()({},s||{})}));case 1:case"end":return d.stop()}},E)})),c.apply(this,arguments)}function a(E){return y.apply(this,arguments)}function y(){return y=f()(i()().mark(function E(s){return i()().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.abrupt("return",(0,C.request)("".concat("https://apa.vintrip.vn/api/v1","/orders/cancel/").concat(s==null?void 0:s.oid),{method:"POST",headers:{Authorization:"Bearer ".concat((0,S.v)())},data:l()({},s||{})}));case 1:case"end":return d.stop()}},E)})),y.apply(this,arguments)}function _(E){return ne.apply(this,arguments)}function ne(){return ne=f()(i()().mark(function E(s){return i()().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.abrupt("return",(0,C.request)("".concat("https://apa.vintrip.vn/api/v1","/orders/cancel-many"),{method:"POST",headers:{Authorization:"Bearer ".concat((0,S.v)())},data:l()({},s||{})}));case 1:case"end":return d.stop()}},E)})),ne.apply(this,arguments)}function mn(E){return Ce.apply(this,arguments)}function Ce(){return Ce=_asyncToGenerator(_regeneratorRuntime().mark(function E(s){return _regeneratorRuntime().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.abrupt("return",request("".concat("https://apa.vintrip.vn/api/v1","/orders"),{method:"POST",headers:{Authorization:"Bearer ".concat(getAuth())},data:_objectSpread({},s||{})}));case 1:case"end":return d.stop()}},E)})),Ce.apply(this,arguments)}function vn(E){return Oe.apply(this,arguments)}function Oe(){return Oe=_asyncToGenerator(_regeneratorRuntime().mark(function E(s){return _regeneratorRuntime().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.abrupt("return",request("".concat("https://apa.vintrip.vn/api/v1","/orders/send-mail"),{method:"POST",headers:{Authorization:"Bearer ".concat(getAuth())},data:_objectSpread({},s||{})}));case 1:case"end":return d.stop()}},E)})),Oe.apply(this,arguments)}var Fe=t(22818),Ne=t(85144),We=t(35245),Ye=t(70024),Ge=t(53830),W=t(83258),de=t(41914),Ve=t(90393),oe=t(65606),we=t(1298),Xe=t(51588),ie=t(73118),Qe=t(68337),k=t(50959),Je=t(80223),qe=t(88815),en=t(74091),nn=t(90920),tn=t(92011),Ze=t(64590),rn=t(21621),Re=t(58640),Be=t(76830),Me=t(40937),he=t(29634),e=t(11527),an=function(s){var A=s.actionBillRef,d=s.departInfo,w=s.data,L=s.takePrice,J=s.isDiscount,R=w[0],me=R.customerName,ce=R.customerPhone,ue=R.exportUser,se=new Date;return(0,e.jsx)(e.Fragment,{children:(0,e.jsxs)("div",{className:"print-bill",ref:A,children:[(0,e.jsxs)("div",{style:{display:"grid",justifyItems:"center"},children:[(0,e.jsx)("span",{style:{fontSize:"16.5pt",fontWeight:"bold"},children:d.name.toUpperCase()}),(0,e.jsxs)("span",{style:{fontSize:"12pt",fontWeight:"bold"},children:["S\u0110T: ",d.phone]}),(0,e.jsx)("span",{style:{fontSize:"15pt",fontWeight:"bold"},children:"H\xD3A \u0110\u01A0N B\xC1N H\xC0NG"})]}),(0,e.jsxs)("div",{children:[(0,e.jsxs)("div",{children:[(0,e.jsx)("strong",{children:"Kh\xE1ch h\xE0ng: "}),me]}),(0,e.jsxs)("div",{children:["\u0110i\u1EC7n tho\u1EA1i: ",ce]}),(0,e.jsxs)("div",{children:["Th\u1EDDi gian: ",(0,g.Fc)(se.toString())]}),(0,e.jsxs)("div",{children:[(0,e.jsx)("strong",{children:"Ng\u01B0\u1EDDi b\xE1n: "}),ue.split("@")[0]]})]}),(0,e.jsx)("hr",{style:{marginTop:"40px",borderTop:"1px dashed"}}),(0,e.jsxs)("table",{width:"100%",children:[(0,e.jsxs)("tr",{children:[(0,e.jsx)("th",{style:{textAlign:"left",width:"55%"},children:"\u0110\u01A1n gi\xE1"}),(0,e.jsx)("th",{style:{textAlign:"left"},children:"SL"}),(0,e.jsx)("th",{style:{textAlign:"right"},children:"Th\xE0nh ti\u1EC1n"})]}),w.map(function(q){return(0,e.jsx)(e.Fragment,{children:(0,e.jsxs)("tr",{style:{borderBottom:"1px dashed"},children:[(0,e.jsxs)("td",{style:{paddingBottom:"30px"},children:[(0,e.jsx)("div",{children:q.groupTicket.name}),(0,e.jsx)("div",{children:(0,g.aS)(q.price)})]}),(0,e.jsx)("td",{style:{paddingBottom:"30px"},children:q.quantity}),(0,e.jsx)("td",{style:{paddingBottom:"30px",textAlign:"right"},children:(0,g.aS)(q.subTotal)})]})})})]}),(0,e.jsx)("div",{style:{display:"flex",justifyContent:"flex-end",marginTop:"20px"},children:(0,e.jsxs)("div",{style:{display:"flex",width:"50%",justifyContent:"space-between"},children:[(0,e.jsxs)("div",{style:{textAlign:"right"},children:[(0,e.jsx)("div",{children:"T\u1ED5ng ti\u1EC1n h\xE0ng:"}),(0,e.jsx)("div",{children:"Chi\u1EBFt kh\u1EA5u:"}),(0,e.jsx)("div",{children:"T\u1ED5ng c\u1ED9ng:"})]}),(0,e.jsxs)("div",{style:{textAlign:"right"},children:[(0,e.jsx)("div",{children:(0,g.aS)(L.total)}),(0,e.jsx)("div",{children:J?(0,g.aS)(L.discount):0}),(0,e.jsx)("strong",{children:J?(0,g.aS)(L.total-L.discount):(0,g.aS)(L.total)})]})]})}),(0,e.jsxs)("div",{style:{display:"grid",justifyItems:"center",marginTop:"20px"},children:[(0,e.jsx)("span",{children:"STK: 3552 5378 888"}),(0,e.jsx)("span",{children:"CTK: Cao Th\u1ECB C\u1EA9m T\xFA - TP Bank"})]}),(0,e.jsx)("hr",{}),(0,e.jsx)("strong",{children:"C\u1EA3m \u01A1n qu\xFD kh\xE1ch"}),(0,e.jsx)("hr",{})]})})},ze=an,ke=we.Z.Text,pe={fontSize:"12px",fontWeight:"bold",lineHeight:1.1},un=function(s){var A=(0,k.useRef)(null),d=(0,k.useRef)(null),w=(0,k.useRef)(null),L=(0,k.useState)({name:he.Z.get("departName")||"",phone:he.Z.get("departPhone")||""}),J=D()(L,2),R=J[0],me=J[1],ce=s.values.map(function(x){return x.groupTicket.bigTicket._id}),ue=(0,C.useRequest)(Fe.U0,{manual:!0,formatResult:function(O){return O.data}}),se=ue.data,q=ue.run;(0,k.useEffect)(function(){q({listBig:ce})},[s.manyLinkModalOpen]);var xe=(0,Be.useReactToPrint)({content:function(){return A.current},documentTitle:"emp-data"}),Ee=(0,Be.useReactToPrint)({content:function(){return d.current},documentTitle:"Giao d\u1ECBch - H\xF3a \u0111\u01A1n"}),Ie=(0,Be.useReactToPrint)({content:function(){return w.current},documentTitle:"Giao d\u1ECBch - H\xF3a \u0111\u01A1n"}),je=function(O){R.name?O?Ie():Ee():W.ZP.warning("B\u1EA1n ch\u01B0a ch\u1ECDn qu\u1EA7y v\xE9")};if(s.manyLinkModalOpen===!0&&se&&se.length){var ve=s.takePrice.total,fe=s.takePrice.discount;return(0,e.jsxs)(qe.Y,{width:1980,open:s.manyLinkModalOpen,onFinish:f()(i()().mark(function x(){return i()().wrap(function(j){for(;;)switch(j.prev=j.next){case 0:return j.abrupt("return",xe());case 1:case"end":return j.stop()}},x)})),modalProps:{destroyOnClose:!0,onCancel:function(){s.onCancel()},cancelText:"H\u1EE7y",okText:"In"},title:(0,e.jsxs)(de.Z,{align:"baseline",children:[(0,e.jsx)(ke,{hidden:ve===0,type:"success",children:"T\u1ED5ng: ".concat((0,g.aS)(ve)," , Chi\u1EBFt kh\u1EA5u: ").concat((0,g.aS)(fe),", Thanh to\xE1n: ").concat((0,g.aS)(ve-fe))}),(0,e.jsx)(ie.ZP,{type:"primary",icon:(0,e.jsx)(Me.Z,{}),onClick:f()(i()().mark(function x(){return i()().wrap(function(j){for(;;)switch(j.prev=j.next){case 0:return j.abrupt("return",xe());case 1:case"end":return j.stop()}},x)})),children:"In v\xE9"}),(0,e.jsx)(ie.ZP,{icon:(0,e.jsx)(Me.Z,{}),onClick:f()(i()().mark(function x(){return i()().wrap(function(j){for(;;)switch(j.prev=j.next){case 0:je(!1);case 1:case"end":return j.stop()}},x)})),children:"Bill t\u1ED5ng"}),(0,e.jsx)(ie.ZP,{icon:(0,e.jsx)(Me.Z,{}),onClick:f()(i()().mark(function x(){return i()().wrap(function(j){for(;;)switch(j.prev=j.next){case 0:je(!0);case 1:case"end":return j.stop()}},x)})),children:"Bill ck"}),(0,e.jsx)(en.Z,{style:{width:"250px"},name:"departID",label:"Ch\u1ECDn \u0111\u1ECBa \u0111i\u1EC3m",onChange:function(O,j){me({name:j.label,phone:j.phone}),he.Z.set("departPhone",j.phone),he.Z.set("departName",j.label)},fieldProps:{defaultValue:he.Z.get("departName"),options:s.departList&&(0,g.jX)(s.departList)},showSearch:!0,placeholder:"Ch\u1ECDn \u0111\u1ECBa \u0111i\u1EC3m",allowClear:!1,rules:[{required:!0,message:"B\u1EA1n ch\u01B0a ch\u1ECDn qu\u1EA7y v\xE9!"}]})]}),children:[(0,e.jsx)("div",{style:{display:"none"},children:(0,e.jsx)(ze,{actionBillRef:d,departInfo:R,data:s.values,isDiscount:!1,takePrice:s.takePrice})}),(0,e.jsx)("div",{style:{display:"none"},children:(0,e.jsx)(ze,{actionBillRef:w,departInfo:R,data:s.values,isDiscount:!0,takePrice:s.takePrice})}),(0,e.jsx)("div",{children:(0,e.jsx)("div",{ref:A,children:s.values.map(function(x,O){var j,Te=x.quantity,B=x.groupTicket,Le=x.bookDate,Z=x.price,He=x.subTotal,Pe=x.discountSubtotal,ee=x.orderId,I=(B==null?void 0:B.unit)&&s.unit[B.unit],De=B==null||(j=B.bigTicket)===null||j===void 0?void 0:j.name,le=se[O],$e=le.logo,be=le.note,Ue=le.manual,Ae=le.heightNote;return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)(de.Z,{className:"hide-after-page-break",align:"baseline",children:[(0,e.jsx)(we.Z.Title,{level:5,children:"".concat(Te," ").concat(B==null?void 0:B.name," - ").concat(I.name," - ").concat(De," ")}),(0,e.jsx)(ke,{mark:!0,children:"T\u1ED5ng: ".concat((0,g.aS)(He)," , Chi\u1EBFt kh\u1EA5u: ").concat((0,g.aS)(Pe))})]}),(0,e.jsx)("div",{style:{display:"flex",justifyContent:"flex-start",flexWrap:"wrap",flexDirection:"row"},children:x.allOfTicket.map(function(Se,ge){return(0,e.jsx)(e.Fragment,{children:(0,e.jsx)("div",{className:"print-ticket",children:(0,e.jsx)(nn.Z,{className:"superCard",style:{margin:"10px",padding:"5px",width:270,borderRadius:0,pageBreakBefore:"always"},bodyStyle:{padding:0},children:(0,e.jsxs)("div",{children:[(0,e.jsxs)(tn.Z,{align:"middle",justify:"space-between",style:{padding:"0.2rem"},children:[(0,e.jsx)(Ze.Z,{width:120,preview:!1,src:"".concat("https://apa.vintrip.vn/image","/BigTicket/").concat($e),crossOrigin:"anonymous"}),(0,e.jsx)(Ze.Z,{width:70,preview:!1,src:"https://apa.vintrip.vn/image/Vintrip/logo.png",crossOrigin:"anonymous"})]}),(0,e.jsx)("hr",{}),(0,e.jsxs)("div",{style:{display:"flex"},children:[(0,e.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center"},children:[(0,e.jsx)(rn.Z,{size:110,bordered:!1,value:Se.serial}),(0,e.jsx)(ke,{strong:!0,children:Se.serial})]}),(0,e.jsxs)("div",{style:{paddingTop:"10px"},children:[(0,e.jsxs)("div",{style:{display:"flex",flexDirection:"column",paddingBottom:"3px"},children:[(0,e.jsx)("div",{style:pe,children:"".concat(B==null?void 0:B.name," - ").concat(I.name)}),(0,e.jsx)("small",{children:Ae[I.note]})]}),(0,e.jsx)("p",{style:{fontSize:"11px"},children:De}),(0,e.jsxs)("p",{style:{fontSize:"11px"},children:["Ng\xE0y: ",(0,g._3)(Le)]}),(0,e.jsxs)("p",{style:{fontSize:"11px"},children:["Gi\xE1: ",(0,g.aS)(Z)]})]})]}),(0,e.jsx)(Re.Z,{dashed:!0,style:{margin:"0"}}),(0,e.jsxs)("div",{style:{padding:"5px"},children:[(0,e.jsxs)("div",{style:{marginBottom:"7px"},children:[(0,e.jsx)("strong",{children:"H\u01B0\u1EDBng d\u1EABn s\u1EED d\u1EE5ng"}),(0,e.jsx)("br",{}),(0,e.jsx)("div",{style:{lineHeight:1.2},children:Ue.split(`
`).map(function(te){return(0,e.jsx)(e.Fragment,{children:(0,e.jsx)("div",{style:{fontSize:"13px"},children:te})})})})]}),(0,e.jsxs)("div",{children:[(0,e.jsx)("strong",{children:"L\u01B0u \xFD"}),(0,e.jsx)("br",{}),(0,e.jsx)("div",{style:{lineHeight:1.2},children:be.split(`
`).map(function(te){return(0,e.jsx)(e.Fragment,{children:(0,e.jsx)("div",{style:{fontSize:"13px"},children:te})})})})]})]}),(0,e.jsx)(Re.Z,{dashed:!0,style:{margin:"5px 0"}}),(0,e.jsxs)("div",{style:{padding:"5px"},children:[(0,e.jsx)("div",{style:pe,children:"Vintrip"}),(0,e.jsx)("div",{style:pe,children:"Hotline: 0906897705"}),(0,e.jsxs)("div",{style:pe,children:["M\xE3 \u0111\u1EB7t v\xE9: ",ee]})]}),(0,e.jsx)(Re.Z,{dashed:!0,style:{margin:"5px 0"}}),(0,e.jsx)("div",{style:l()(l()({},pe),{},{textAlign:"center"}),children:"".concat(ge+1,"/").concat(x.allOfTicket.length)})]})},ge)})})})})]})})})})]})}},sn=un,ye={Finished:{name:"Ho\xE0n th\xE0nh",color:"Green"},Canceled:{name:"\u0110\xE3 H\u1EE7y",color:"red"},Pending:{name:"Pending",color:"yellow"}},Ke={Adult:{name:"Ng\u01B0\u1EDDi l\u1EDBn",note:0},Child:{name:"Tr\u1EBB em",note:1},Elder:{name:"Ng\u01B0\u1EDDi cao tu\u1ED5i",note:2}},ln=function(){var s=(0,C.useModel)("@@initialState"),A=s.initialState,d=A.departList,w=d.map(function(h){return h.cashiers.map(function(r){return{name:r.name,id:r._id}})}).flat(),L=(0,g.z2)(w,"id"),J=(0,C.useRequest)(Fe.Uu,{manual:!0,formatResult:function(r){return r.data}}),R=J.data,me=J.run,ce=(0,C.useRequest)(Je.Lh,{manual:!0,formatResult:function(r){return r.data.map(function(n){return{label:"".concat(n.name),value:n.email}})}}),ue=ce.data,se=ce.run;(0,k.useEffect)(function(){me({current:1,pageSize:100}),se({current:1,pageSize:100})},[]);var q=(0,C.useAccess)(),xe=(0,k.useState)({total:0,discount:0}),Ee=D()(xe,2),Ie=Ee[0],je=Ee[1],ve=(0,k.useState)(null),fe=D()(ve,2),x=fe[0],O=fe[1],j=(0,k.useState)([]),Te=D()(j,2),B=Te[0],Le=Te[1],Z=(0,k.useRef)(),He=(0,k.useState)([]),Pe=D()(He,2),ee=Pe[0],I=Pe[1],De=(0,k.useState)([]),le=D()(De,2),$e=le[0],be=le[1],Ue=(0,k.useState)(!1),Ae=D()(Ue,2),Se=Ae[0],ge=Ae[1],te=function(){var h=f()(i()().mark(function r(n,v){var o;return i()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:if(o=W.ZP.loading("\u0110ang x\u1EED l\xFD"),u.prev=1,v!=="Canceled"){u.next=14;break}if(!(n.length>1)){u.next=8;break}return u.next=6,_({key:n.map(function(M){return M._id})});case 6:u.next=10;break;case 8:return u.next=10,a({oid:n[0]._id});case 10:o(),W.ZP.success("\u0110\xE3 h\u1EE7y \u0111\u01A1n h\xE0ng!"),u.next=30;break;case 14:if(!(n.length>1)){u.next=19;break}return u.next=17,F({key:n.map(function(M){return M._id})});case 17:u.next=29;break;case 19:return u.prev=19,u.next=22,U({oid:n[0]._id,state:v});case 22:W.ZP.success("X\xE1c nh\u1EADn \u0111\u01A1n h\xE0ng th\xE0nh c\xF4ng!"),u.next=28;break;case 25:u.prev=25,u.t0=u.catch(19),W.ZP.error("X\xE1c nh\u1EADn \u0111\u01A1n h\xE0ng kh\xF4ng th\xE0nh c\xF4ng!");case 28:I([]);case 29:o();case 30:return u.abrupt("return",!0);case 33:return u.prev=33,u.t1=u.catch(1),o(),W.ZP.error("\u0110\xE3 c\xF3 l\u1ED7i x\u1EA3y ra, vui l\xF2ng th\u1EED l\u1EA1i!"),u.abrupt("return",!1);case 38:case"end":return u.stop()}},r,null,[[1,33],[19,25]])}));return function(n,v){return h.apply(this,arguments)}}(),dn=function(){var h=f()(i()().mark(function r(n,v){var o,T,u,M,P;return i()().wrap(function(H){for(;;)switch(H.prev=H.next){case 0:if(o=W.ZP.loading("\u0110ang x\u1EED l\xFD"),T=n[0],u=T.price,M=T.quantity,P=T.discountPrice,v!==M){H.next=9;break}return o(),W.ZP.success("\u0110\xE3 c\u1EADp nh\u1EADt \u0111\u01A1n h\xE0ng th\xE0nh c\xF4ng!"),O(null),H.abrupt("return",!0);case 9:return H.prev=9,H.next=12,m({oid:n[0]._id,rmQuan:M-v,newQuan:v,newSubtotal:v*u,newDiscountTotal:v*P});case 12:return o(),W.ZP.success("\u0110\xE3 c\u1EADp nh\u1EADt \u0111\u01A1n h\xE0ng th\xE0nh c\xF4ng!"),O(null),H.abrupt("return",!0);case 18:return H.prev=18,H.t0=H.catch(9),o(),W.ZP.error("\u0110\xE3 c\xF3 l\u1ED7i x\u1EA3y ra, vui l\xF2ng th\u1EED l\u1EA1i!"),O(null),H.abrupt("return",!1);case 24:case"end":return H.stop()}},r,null,[[9,18]])}));return function(n,v){return h.apply(this,arguments)}}(),on=[{title:"M\xE3 \u0110H",dataIndex:"orderId"},{title:"Ng\xE0y xu\u1EA5t v\xE9",dataIndex:"updatedAt",render:function(r,n){return(0,g._3)(n.updatedAt)}},{title:"\u0110\u1EA1i di\u1EC7n",dataIndex:"customerName",render:function(r,n){return"".concat(n.customerName," - ").concat(n.customerPhone)}},{title:"\u0110ia \u0111i\u1EC3m",dataIndex:["groupTicket","bigTicket","name"]},{title:"Sku",dataIndex:["groupTicket","sku"]},{title:"Lo\u1EA1i v\xE9",dataIndex:"groupTicket",render:function(r,n){return"".concat(n.groupTicket.name," - ").concat(n.groupTicket.unit)}},{title:"S\u1ED1 l\u01B0\u1EE3ng",dataIndex:"quantity"},{title:"\u0110\u01A1n gi\xE1",dataIndex:"price"},{title:"T\u1ED5ng",dataIndex:"subTotal"},{title:"Tr\u1EA1ng th\xE1i",dataIndex:"state",render:function(r,n){return ye[n.state].name}}],hn=function(){var h=f()(i()().mark(function r(){var n;return i()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,new Qe.i;case 2:n=o.sent,n.addSheet("Sheet").addColumns(on).addDataSource(B,{str2Percent:!0}).saveAs("Order-File.xlsx");case 4:case"end":return o.stop()}},r)}));return function(){return h.apply(this,arguments)}}(),pn=[{title:"T\xEAn ng\u01B0\u1EDDi xu\u1EA5t",dataIndex:"exportUser",valueType:"select",valueEnum:ue&&(0,g.Xy)(ue,"value"),hideInTable:!0,hideInSearch:q.canSale,fieldProps:{showSearch:!0,placeholder:"Ch\u1ECDn ng\u01B0\u1EDDi xu\u1EA5t"},render:function(){return null}},{title:"\u0110\u1ECBa \u0111i\u1EC3m",dataIndex:"groupTicket",hideInTable:!0,valueType:"cascader",fieldProps:{options:R&&(0,g.XV)(R),placeholder:"Ch\u1ECDn \u0111\u1ECBa \u0111i\u1EC3m",fieldNames:{children:"ticket",label:"field"},changeOnSelect:!0},search:{transform:function(r){return r.length===2?{groupTicket:r[1]}:{bigTicket:r}}},render:function(){return null}},{title:"Ng\xE0y xu\u1EA5t v\xE9",dataIndex:"updatedAt",valueType:"dateRange",hideInTable:!0,fieldProps:function(){return{format:"DD/MM/YYYY",presets:Ne.U,placeholder:["T\u1EEB ng\xE0y","\u0110\u1EBFn ng\xE0y"]}},search:{transform:function(r){return{"updatedAt[gte]":(0,g.uO)(r[0]),"updatedAt[lte]":ae()(r[1],"DD/MM/YYYY").add(1,"days").toISOString(),sort:"updatedAt"}}},render:function(){return null}},{title:"M\xE3 \u0110H",dataIndex:"orderId",valueType:"digit",fieldProps:{placeholder:"Nh\u1EADp m\xE3 \u0111\u01A1n h\xE0ng"},render:function(r,n){return(0,e.jsxs)("div",{children:[(0,e.jsxs)("div",{children:[n.orderId," - ",(0,g.Fc)(n.updatedAt)]}),(0,e.jsx)("div",{children:n.exportUser})]})}},{title:"Kh\xE1ch h\xE0ng",valueType:"text",dataIndex:"customerPhone",fieldProps:{placeholder:"Nh\u1EADp s\u0111t kh\xE1ch h\xE0ng"},render:function(r,n){return(0,e.jsxs)("div",{children:[(0,e.jsx)("div",{children:n.customerName}),(0,e.jsx)("div",{children:n.customerPhone})]})}},{title:"Qu\u1EA7y",dataIndex:"departID",valueType:"text",renderText:function(r){return L[r]},hideInSearch:!0},{title:"Lo\u1EA1i v\xE9",hideInSearch:!0,render:function(r,n){var v=n.groupTicket;return(0,e.jsxs)("div",{children:[(0,e.jsxs)("div",{children:[v.sku," - ",v.name]}),(0,e.jsxs)("div",{children:[(0,e.jsx)("b",{children:v.bigTicket.name})," - ",(0,g.aS)(n.price)," - ",(0,g._3)(n.bookDate)]})]})}},{title:"T\u1ED5ng",hideInSearch:!0,render:function(r,n){var v=n.groupTicket;return(0,e.jsxs)("div",{children:[(0,e.jsxs)("div",{children:[n.quantity,"(",Ke[v.unit].name,")"]}),(0,e.jsx)("div",{children:(0,g.aS)(n.subTotal)})]})}},{title:"Chi\u1EBFt kh\u1EA5u",hideInSearch:!0,render:function(r,n){return(0,e.jsxs)("div",{children:[(0,e.jsx)("div",{children:"".concat(n.quantity," x ").concat((0,g.aS)(n.discountPrice))}),(0,e.jsx)("div",{children:(0,g.aS)(n.discountSubtotal)})]})}},{title:"Tr\u1EA1ng th\xE1i",dataIndex:"state",valueType:"select",valueEnum:{Finished:"Ho\xE0n th\xE0nh",Canceled:"H\u1EE7y",Pending:"Pending"},fieldProps:{placeholder:"Ch\u1ECDn tr\u1EA1ng th\xE1i \u0111\u01A1n h\xE0ng",style:{backgroundColor:"red"}},render:function(r,n){return{props:{style:{textAlign:"center"}},children:[(0,e.jsx)(e.Fragment,{children:(0,e.jsxs)(de.Z,{direction:"vertical",size:"small",children:[(0,e.jsx)(Ve.Z,{style:{width:"80px",textAlign:"center"},color:ye[n.state].color,children:ye[n.state].name},ye[n.state].name),(0,e.jsx)("div",{children:(0,e.jsx)(oe.Z,{title:(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(we.Z.Title,{level:5,children:"Nh\u1EADp l\u1EA1i s\u1ED1 v\xE9 c\u1EA7n xu\u1EA5t"}),(0,e.jsx)(Xe.Z,{style:{width:"100%"},min:1,max:n.quantity,value:x,onChange:function(o){return O(o)}})]}),cancelText:"H\u1EE7y",okButtonProps:{disabled:!x},onCancel:function(){return O(null)},onConfirm:f()(i()().mark(function v(){var o,T,u;return i()().wrap(function(P){for(;;)switch(P.prev=P.next){case 0:return P.next=2,dn([n],x);case 2:o=P.sent,o&&(I([]),Z.current&&(I([]),(T=Z.current)===null||T===void 0||(u=T.reloadAndRest)===null||u===void 0||u.call(T)));case 4:case"end":return P.stop()}},v)})),children:(0,e.jsx)("a",{hidden:n.state!=="Pending"||n.quantity===1,children:"C\u1EADp nh\u1EADt"},"success")})})]})})]}}},{title:"T\xF9y ch\u1ECDn",dataIndex:"option",valueType:"option",render:function(r,n){return[(0,e.jsx)(e.Fragment,{children:(0,e.jsx)(oe.Z,{title:"B\u1EA1n ch\u1EAFc ch\u1EAFn mu\u1ED1n x\xE1c nh\u1EADn \u0111\u01A1n h\xE0ng n\xE0y?",onConfirm:f()(i()().mark(function v(){var o,T,u;return i()().wrap(function(P){for(;;)switch(P.prev=P.next){case 0:return P.next=2,te([n],"Finished");case 2:o=P.sent,o&&(I([]),Z.current&&(I([]),(T=Z.current)===null||T===void 0||(u=T.reloadAndRest)===null||u===void 0||u.call(T)));case 4:case"end":return P.stop()}},v)})),children:(0,e.jsx)("a",{hidden:n.state!=="Pending",children:"X\xE1c nh\u1EADn"},"success")})}),(0,e.jsx)(e.Fragment,{children:(0,e.jsx)(oe.Z,{title:"B\u1EA1n ch\u1EAFc ch\u1EAFn mu\u1ED1n h\u1EE7y \u0111\u01A1n h\xE0ng n\xE0y?",onConfirm:f()(i()().mark(function v(){var o,T,u;return i()().wrap(function(P){for(;;)switch(P.prev=P.next){case 0:return P.next=2,te([n],"Canceled");case 2:o=P.sent,o&&Z.current&&(I([]),(T=Z.current)===null||T===void 0||(u=T.reloadAndRest)===null||u===void 0||u.call(T));case 4:case"end":return P.stop()}},v)})),children:(0,e.jsx)("a",{hidden:n.state!=="Pending",children:"H\u1EE7y"},"delete")})})]}}];return(0,e.jsxs)(We._z,{children:[(0,e.jsx)(Ye.Z,{pagination:{showSizeChanger:!0,showTotal:function(r){return"T\u1ED5ng ".concat(r," \u0111\u01A1n h\xE0ng")}},dateFormatter:"string",actionRef:Z,rowKey:function(r){return r.state+","+r._id},search:{labelWidth:100,defaultCollapsed:!1,searchText:"T\xECm",resetText:"\u0110\u1EB7t l\u1EA1i",collapseRender:function(){return!0}},toolBarRender:function(){return[(0,e.jsx)(e.Fragment,{children:(0,e.jsx)(ie.ZP,{hidden:q.canSale,type:"primary",onClick:function(){return hn()},children:"Xu\u1EA5t file"})})]},request:function(){var h=f()(i()().mark(function r(n,v){var o;return i()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.next=2,(0,C.request)("".concat("https://apa.vintrip.vn/api/v1","/orders"),l()({method:"GET",headers:{Authorization:"Bearer ".concat((0,S.v)())},params:l()({},n)},v||{}));case 2:return o=u.sent,Le(o==null?void 0:o.data),u.abrupt("return",o);case 5:case"end":return u.stop()}},r)}));return function(r,n){return h.apply(this,arguments)}}(),columns:pn,tableAlertRender:function(r){var n=r.selectedRowKeys,v=r.selectedRows,o=r.onCleanSelected,T=v.reduce(function(M,P){return M+P.subTotal},0),u=v.reduce(function(M,P){return M+P.discountSubtotal},0);return(0,e.jsxs)(de.Z,{size:24,children:[(0,e.jsxs)("span",{children:["Ch\u1ECDn ",n.length," \u0111\u01A1n",(0,e.jsx)("a",{style:{marginInlineStart:8},onClick:o,children:"B\u1ECF ch\u1ECDn"})]}),(0,e.jsx)("span",{children:"T\u1ED5ng: ".concat((0,g.aS)(T))}),(0,e.jsx)("span",{children:"-"}),(0,e.jsx)("span",{children:"Chi\u1EBFt kh\u1EA5u: ".concat((0,g.aS)(u))}),(0,e.jsx)("span",{children:"="}),(0,e.jsx)("span",{children:"".concat((0,g.aS)(T-u))})]})},tableAlertOptionRender:function(r){var n=r.selectedRows;if(n.every(function(v){return v.state==="Finished"}))return(0,e.jsx)(de.Z,{size:16,children:(0,e.jsx)(ie.ZP,{type:"default",color:"#34ebc0",onClick:function(){be(ee),ge(!0)},children:"Link"})})},rowSelection:{onChange:function(r,n){var v=n.reduce(function(T,u){return T+u.subTotal},0),o=n.reduce(function(T,u){return T+u.discountSubtotal},0);je({total:v,discount:o}),I(n)},getCheckboxProps:function(r){return{disabled:r.state==="Canceled"}}}}),(ee==null?void 0:ee.length)>0&&(0,e.jsx)(Ge.S,{children:ee.every(function(h){return h.state==="Pending"})&&(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(oe.Z,{title:"B\u1EA1n ch\u1EAFc ch\u1EAFn mu\u1ED1n x\xE1c nh\u1EADn \u0111\u01A1n h\xE0ng n\xE0y?",onConfirm:f()(i()().mark(function h(){var r,n;return i()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,te(ee,"Finished");case 2:I([]),(r=Z.current)===null||r===void 0||(n=r.reloadAndRest)===null||n===void 0||n.call(r);case 4:case"end":return o.stop()}},h)})),children:(0,e.jsx)(ie.ZP,{type:"primary",children:"X\xE1c nh\u1EADn"})}),(0,e.jsx)(oe.Z,{title:"B\u1EA1n ch\u1EAFc ch\u1EAFn mu\u1ED1n h\u1EE7y \u0111\u01A1n h\xE0ng n\xE0y?",onConfirm:f()(i()().mark(function h(){var r,n;return i()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,te(ee,"Canceled");case 2:I([]),(r=Z.current)===null||r===void 0||(n=r.reloadAndRest)===null||n===void 0||n.call(r);case 4:case"end":return o.stop()}},h)})),children:(0,e.jsx)(ie.ZP,{type:"primary",danger:!0,children:"H\u1EE7y \u0111\u01A1n"})})]})}),(0,e.jsx)(sn,{onCancel:function(){ge(!1),be([])},manyLinkModalOpen:Se,values:$e||{},unit:Ke,takePrice:Ie,departList:d})]})},cn=ln}}]);
